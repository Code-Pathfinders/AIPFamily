# å®¶æ—æ—è°±ç®¡ç†ç³»ç»Ÿ - é¡¹ç›®æ¦‚è§ˆ

## ğŸ“‹ é¡¹ç›®ä¿¡æ¯

**é¡¹ç›®åç§°**ï¼šå®¶æ—æ—è°±ç®¡ç†ç³»ç»Ÿ  
**æŠ€æœ¯æ¶æ„**ï¼šDDDé¢†åŸŸé©±åŠ¨è®¾è®¡  
**å¼€å‘æ—¶é—´**ï¼š2024å¹´  
**ç‰ˆæœ¬**ï¼šv1.0.0

## ğŸ¯ é¡¹ç›®ç›®æ ‡

åˆ›å»ºä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„å®¶æ—æ—è°±ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒï¼š
- å¯è§†åŒ–å±•ç¤ºå®¶æ—å…³ç³»å›¾è°±
- çµæ´»çš„æˆå‘˜ä¿¡æ¯ç®¡ç†
- è‡ªå®šä¹‰èŠ‚ç‚¹æ ·å¼å’Œå±æ€§
- æŒä¹…åŒ–å­˜å‚¨å…³ç³»å›¾å¸ƒå±€

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
```
.NET Core 8 Web API
â”œâ”€â”€ Domain Layer (é¢†åŸŸå±‚)
â”‚   â””â”€â”€ å®ä½“å®šä¹‰å’Œä¸šåŠ¡è§„åˆ™
â”œâ”€â”€ Application Layer (åº”ç”¨å±‚)
â”‚   â””â”€â”€ ä¸šåŠ¡é€»è¾‘å’ŒæœåŠ¡æ¥å£
â”œâ”€â”€ Infrastructure Layer (åŸºç¡€è®¾æ–½å±‚)
â”‚   â””â”€â”€ æ•°æ®è®¿é—®å’ŒEF Core
â””â”€â”€ WebAPI Layer (æ¥å£å±‚)
    â””â”€â”€ RESTful APIå’ŒSwaggeræ–‡æ¡£
```

**æ ¸å¿ƒæŠ€æœ¯**ï¼š
- .NET Core 8
- Entity Framework Core 8
- SQLite æ•°æ®åº“
- Swagger/OpenAPI

### å‰ç«¯æŠ€æœ¯æ ˆ
```
Vue 3 + TypeScript
â”œâ”€â”€ Components (ç»„ä»¶å±‚)
â”‚   â”œâ”€â”€ FamilyTree.vue (å›¾å½¢å¯è§†åŒ–)
â”‚   â””â”€â”€ MemberEditor.vue (æˆå‘˜ç¼–è¾‘)
â”œâ”€â”€ Stores (çŠ¶æ€ç®¡ç†)
â”‚   â””â”€â”€ Pinia Store
â”œâ”€â”€ API (æ¥å£å±‚)
â”‚   â””â”€â”€ Axios HTTP Client
â””â”€â”€ Types (ç±»å‹å®šä¹‰)
    â””â”€â”€ TypeScript Interfaces
```

**æ ¸å¿ƒæŠ€æœ¯**ï¼š
- Vue 3 Composition API
- TypeScript
- AntV G6 å›¾å¯è§†åŒ–
- Pinia çŠ¶æ€ç®¡ç†
- Vite æ„å»ºå·¥å…·

## ğŸ“ é¡¹ç›®ç»“æ„

```
AIProject/
â”œâ”€â”€ Backend/                          # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ Domain/                       # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ Entities/
â”‚   â”‚   â”‚   â”œâ”€â”€ BaseEntity.cs        # åŸºç¡€å®ä½“
â”‚   â”‚   â”‚   â”œâ”€â”€ Family.cs            # å®¶æ—å®ä½“
â”‚   â”‚   â”‚   â””â”€â”€ FamilyMember.cs      # æˆå‘˜å®ä½“
â”‚   â”‚   â””â”€â”€ Domain.csproj
â”‚   â”‚
â”‚   â”œâ”€â”€ Application/                  # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ DTOs/
â”‚   â”‚   â”‚   â”œâ”€â”€ FamilyDto.cs         # å®¶æ—DTO
â”‚   â”‚   â”‚   â””â”€â”€ FamilyMemberDto.cs   # æˆå‘˜DTO
â”‚   â”‚   â”œâ”€â”€ Interfaces/
â”‚   â”‚   â”‚   â”œâ”€â”€ IFamilyService.cs
â”‚   â”‚   â”‚   â””â”€â”€ IFamilyMemberService.cs
â”‚   â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”‚   â”œâ”€â”€ FamilyService.cs
â”‚   â”‚   â”‚   â””â”€â”€ FamilyMemberService.cs
â”‚   â”‚   â””â”€â”€ Application.csproj
â”‚   â”‚
â”‚   â”œâ”€â”€ Infrastructure/               # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â”œâ”€â”€ Data/
â”‚   â”‚   â”‚   â””â”€â”€ FamilyDbContext.cs   # æ•°æ®åº“ä¸Šä¸‹æ–‡
â”‚   â”‚   â””â”€â”€ Infrastructure.csproj
â”‚   â”‚
â”‚   â””â”€â”€ WebAPI/                       # APIå±‚
â”‚       â”œâ”€â”€ Controllers/
â”‚       â”‚   â”œâ”€â”€ FamiliesController.cs
â”‚       â”‚   â””â”€â”€ FamilyMembersController.cs
â”‚       â”œâ”€â”€ Program.cs
â”‚       â”œâ”€â”€ appsettings.json
â”‚       â””â”€â”€ WebAPI.csproj
â”‚
â”œâ”€â”€ Frontend/                         # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                     # APIå°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ http.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ family.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ familyMember.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/              # ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ FamilyTree.vue      # æ—è°±å›¾ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ MemberEditor.vue    # æˆå‘˜ç¼–è¾‘å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stores/                  # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ familyStore.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ types/                   # ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ views/                   # é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ FamilyTreeView.vue
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â”œâ”€â”€ main.ts
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â”‚
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ README.md                         # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ QUICKSTART.md                     # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â”œâ”€â”€ PROJECT_OVERVIEW.md               # é¡¹ç›®æ¦‚è§ˆï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ start-backend.bat                 # åç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start-frontend.bat                # å‰ç«¯å¯åŠ¨è„šæœ¬
â””â”€â”€ install-frontend.bat              # å‰ç«¯ä¾èµ–å®‰è£…è„šæœ¬
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. å®¶æ—ç®¡ç†
- âœ… åˆ›å»ºå®¶æ—
- âœ… æŸ¥çœ‹å®¶æ—åˆ—è¡¨
- âœ… ç¼–è¾‘å®¶æ—ä¿¡æ¯
- âœ… åˆ é™¤å®¶æ—

### 2. æˆå‘˜ç®¡ç†
- âœ… æ·»åŠ æˆå‘˜
- âœ… ç¼–è¾‘æˆå‘˜ä¿¡æ¯
- âœ… åˆ é™¤æˆå‘˜
- âœ… è®¾ç½®æˆå‘˜å…³ç³»ï¼ˆçˆ¶æ¯ã€é…å¶ï¼‰
- âœ… è‡ªå®šä¹‰æˆå‘˜å±æ€§ï¼ˆJSONæ ¼å¼ï¼‰
- âœ… è‡ªå®šä¹‰èŠ‚ç‚¹é¢œè‰²

### 3. å›¾å½¢å¯è§†åŒ–
- âœ… æ ‘çŠ¶å±‚çº§å±•ç¤º
- âœ… è‡ªåŠ¨å¸ƒå±€ç®—æ³•
- âœ… èŠ‚ç‚¹æ‹–æ‹½
- âœ… ç”»å¸ƒç¼©æ”¾å’Œå¹³ç§»
- âœ… èŠ‚ç‚¹ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
- âœ… èŠ‚ç‚¹åŒå‡»ç¼–è¾‘
- âœ… ä¿å­˜èŠ‚ç‚¹ä½ç½®

### 4. æ•°æ®æŒä¹…åŒ–
- âœ… SQLite æ•°æ®åº“å­˜å‚¨
- âœ… è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“
- âœ… å…³ç³»å›¾å¸ƒå±€ä¿å­˜
- âœ… æˆå‘˜ä½ç½®ä¿å­˜

## ğŸ“Š æ•°æ®æ¨¡å‹

### Familyï¼ˆå®¶æ—ï¼‰
```typescript
{
  id: string              // å”¯ä¸€æ ‡è¯†
  name: string            // å®¶æ—åç§°
  description?: string    // æè¿°
  originPlace?: string    // èµ·æºåœ°
  graphLayout?: string    // å›¾å½¢å¸ƒå±€ï¼ˆJSONï¼‰
  createdAt: DateTime     // åˆ›å»ºæ—¶é—´
  updatedAt: DateTime     // æ›´æ–°æ—¶é—´
}
```

### FamilyMemberï¼ˆå®¶æ—æˆå‘˜ï¼‰
```typescript
{
  id: string                  // å”¯ä¸€æ ‡è¯†
  familyId: string            // æ‰€å±å®¶æ—
  name: string                // å§“å
  gender: 'Male' | 'Female'   // æ€§åˆ«
  generation: number          // ä¸–ä»£
  birthDate?: DateTime        // å‡ºç”Ÿæ—¥æœŸ
  deathDate?: DateTime        // å»ä¸–æ—¥æœŸ
  fatherId?: string           // çˆ¶äº²ID
  motherId?: string           // æ¯äº²ID
  spouseId?: string           // é…å¶ID
  avatarUrl?: string          // å¤´åƒURL
  customAttributes?: string   // è‡ªå®šä¹‰å±æ€§ï¼ˆJSONï¼‰
  nodeStyle?: string          // èŠ‚ç‚¹æ ·å¼ï¼ˆJSONï¼‰
  notes?: string              // å¤‡æ³¨
  positionX?: number          // Xåæ ‡
  positionY?: number          // Yåæ ‡
  createdAt: DateTime         // åˆ›å»ºæ—¶é—´
  updatedAt: DateTime         // æ›´æ–°æ—¶é—´
}
```

## ğŸ¨ UIè®¾è®¡ç‰¹ç‚¹

### å¸ƒå±€
- **ä¸‰æ å¸ƒå±€**ï¼šå·¦ä¾§æˆå‘˜åˆ—è¡¨ + ä¸­é—´å›¾å½¢åŒºåŸŸ + å³ä¾§è¯¦æƒ…é¢æ¿
- **å“åº”å¼è®¾è®¡**ï¼šè‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸
- **ç°ä»£åŒ–UI**ï¼šç®€æ´ç¾è§‚çš„ç•Œé¢è®¾è®¡

### äº¤äº’
- **æ‹–æ‹½æ“ä½œ**ï¼šæ”¯æŒèŠ‚ç‚¹å’Œç”»å¸ƒæ‹–æ‹½
- **åŒå‡»ç¼–è¾‘**ï¼šå¿«é€Ÿç¼–è¾‘æˆå‘˜ä¿¡æ¯
- **é¢œè‰²é€‰æ‹©å™¨**ï¼šè‡ªå®šä¹‰èŠ‚ç‚¹é¢œè‰²
- **æ¨¡æ€å¯¹è¯æ¡†**ï¼šå‹å¥½çš„è¡¨å•äº¤äº’

### å¯è§†åŒ–
- **è‡ªå®šä¹‰èŠ‚ç‚¹**ï¼šåŒ…å«å¤´åƒã€å§“åã€ä¸–ä»£ã€å¹´ä»½
- **å…³ç³»è¿çº¿**ï¼šçˆ¶å­å…³ç³»å®çº¿ï¼Œæ¯å­å…³ç³»è™šçº¿
- **æ€§åˆ«åŒºåˆ†**ï¼šç”·æ€§è“è‰²ï¼Œå¥³æ€§ç²‰è‰²ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
- **è‡ªåŠ¨å¸ƒå±€**ï¼šDagreç®—æ³•è‡ªåŠ¨æ’åˆ—

## ğŸ”§ è¿è¡Œå‘½ä»¤

### å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰
```bash
# 1. å®‰è£…å‰ç«¯ä¾èµ–
åŒå‡» install-frontend.bat

# 2. å¯åŠ¨åç«¯
åŒå‡» start-backend.bat

# 3. å¯åŠ¨å‰ç«¯
åŒå‡» start-frontend.bat
```

### æ‰‹åŠ¨å¯åŠ¨
```bash
# åç«¯
cd Backend/WebAPI
dotnet restore
dotnet run

# å‰ç«¯
cd Frontend
npm install
npm run dev
```

## ğŸ“ APIæ¥å£

### å®¶æ—æ¥å£
- `GET /api/families` - è·å–æ‰€æœ‰å®¶æ—
- `GET /api/families/{id}` - è·å–æŒ‡å®šå®¶æ—
- `POST /api/families` - åˆ›å»ºå®¶æ—
- `PUT /api/families/{id}` - æ›´æ–°å®¶æ—
- `DELETE /api/families/{id}` - åˆ é™¤å®¶æ—

### æˆå‘˜æ¥å£
- `GET /api/familymembers/family/{familyId}` - è·å–å®¶æ—æˆå‘˜
- `GET /api/familymembers/{id}` - è·å–æŒ‡å®šæˆå‘˜
- `POST /api/familymembers` - åˆ›å»ºæˆå‘˜
- `PUT /api/familymembers/{id}` - æ›´æ–°æˆå‘˜
- `DELETE /api/familymembers/{id}` - åˆ é™¤æˆå‘˜
- `POST /api/familymembers/positions` - æ‰¹é‡æ›´æ–°ä½ç½®

## ğŸŒŸ é¡¹ç›®äº®ç‚¹

1. **DDDæ¶æ„**ï¼šæ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
2. **ç±»å‹å®‰å…¨**ï¼šTypeScriptæä¾›å®Œæ•´çš„ç±»å‹æ£€æŸ¥
3. **å¯è§†åŒ–æ•ˆæœ**ï¼šåŸºäºAntV G6çš„ä¸“ä¸šå›¾å½¢æ¸²æŸ“
4. **è‡ªå®šä¹‰èƒ½åŠ›**ï¼šæ”¯æŒè‡ªå®šä¹‰å±æ€§å’Œæ ·å¼
5. **æŒä¹…åŒ–å­˜å‚¨**ï¼šå®Œæ•´çš„æ•°æ®ä¿å­˜å’Œæ¢å¤
6. **APIæ–‡æ¡£**ï¼šSwaggerè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£
7. **å¼€ç®±å³ç”¨**ï¼šæä¾›æ‰¹å¤„ç†è„šæœ¬ï¼Œä¸€é”®å¯åŠ¨

## ğŸ”® æœªæ¥æ‰©å±•

å¯ä»¥è€ƒè™‘çš„åŠŸèƒ½æ‰©å±•ï¼š
- [ ] ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- [ ] å¤šå®¶æ—æˆå‘˜å…±äº«
- [ ] å¯¼å‡ºä¸ºå›¾ç‰‡æˆ–PDF
- [ ] æ—¶é—´è½´è§†å›¾
- [ ] ç»Ÿè®¡åˆ†æåŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ä¸»é¢˜åˆ‡æ¢

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. `README.md` - è¯¦ç»†æ–‡æ¡£
2. `QUICKSTART.md` - å¿«é€Ÿå¯åŠ¨æŒ‡å—
3. Swaggeræ–‡æ¡£ - http://localhost:5000

## ğŸ“„ è®¸å¯è¯

MIT License

---

**å¼€å‘å®Œæˆæ—¥æœŸ**ï¼š2024å¹´  
**é¡¹ç›®çŠ¶æ€**ï¼šâœ… å·²å®Œæˆå¹¶å¯è¿è¡Œ
